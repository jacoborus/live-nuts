!function(e){"use strict";var n={},t=!1,r=["type","name","class","nuClass","scope","model","repeat","pipe","if","unless","checked","doctype","children","namesakes","nuSakes"],u=["attribs","nuAtts","namesakes","nuSakes"],s=function(e,n){var t,s;for(t in r)(n[r[t]]||""===n[r[t]])&&(e[r[t]]=n[r[t]]);n.children.length>0&&(1!==n.children.length||" "!==n.children[0].schema.data)&&(e.children=n.children);for(t in u)for(s in n[u[t]])e[u[t]][s]=n[u[t]][s];return e},a=function(e){for(var n,t=e.length,r=0;t>r;){if(n=e[r],"nut"===n.nodeName)return n.value;r++}return!1},i=function(e){for(var n,t=e.length,r={},u=0;t>u;)e.hasOwnProperty(u)&&(n=e[u],r[n.nodeName]=n.value),u++;return r},c=function(e){return 0===e.indexOf("nu-")},o=function(e){return e.substr(3,e.length)},d=function(e,n){var t;for(t in n)if(t===e)return!0;return!1},l=function(e,n){var t,r={},u={};for(t in e)d(t,n)&&(r[t]=e[t],u[t]=n[t],delete e[t],delete n[t]);return[r,u]},h=function(e){var n,t={};for(n in e)c(n)&&(t[o(n)]=e[n],delete e[n]);return t},f=function(e,n){var t,r,u,s=i(e);switch(n.nodeType){case 1:this.type="tag";break;case 3:this.type="text";break;case 8:this.type="comment";break;case 10:this.type="directive"}this.data=n.data,this.name=n.localName,s["class"]&&(this["class"]=s["class"],delete s["class"]),s["nu-class"]&&(this.nuClass=s["nu-class"],delete s["nu-class"]),s["nu-scope"]&&(this.scope=s["nu-scope"],delete s["nu-scope"]),(s["nu-model"]||""===s["nu-model"])&&(this.model=s["nu-model"],delete s["nu-model"]),(s["nu-repeat"]||""===s["nu-repeat"])&&(this.repeat=s["nu-repeat"],delete s["nu-repeat"]),(s["nu-each"]||""===s["nu-each"])&&(this.each=s["nu-each"],delete s["nu-each"]),(s["nu-pipe"]||""===s["nu-pipe"])&&(this.pipe=s["nu-pipe"],delete s["nu-pipe"]),(s["nu-block"]||""===s["nu-block"])&&(this.block=s["nu-block"],delete s["nu-block"]),(s["nu-if"]||""===s["nu-if"])&&(s["nu-if"]&&(this.nuif=s["nu-if"]),delete s["nu-if"]),(s["nu-unless"]||""===s["nu-unless"])&&(s["nu-unless"]&&(this.unless=s["nu-unless"]),delete s["nu-unless"]),(s["nu-checked"]||""===s["nu-checked"])&&(this.checked=s["nu-checked"],delete s["nu-checked"]),""===s["nu-doctype"]&&(this.doctype=!0,delete s["nu-doctype"]),(s["nu-as"]||""===s["nu-as"])&&(s["nu-as"]&&(this.as=s["nu-as"]),delete s["nu-as"]),this.nuAtts=h(s);var a=l(s,this.nuAtts);if(this.namesakes=a[0],this.nuSakes=a[1],n.childNodes&&n.childNodes.length){this.children=[],r=this.children,t=n.childNodes;var c=t.length;for(u=0;c>u;)r[u]={src:null,schema:new f(t[u].attributes||[],t[u])},u++}delete s.nut,this.attribs=s||{}},p=function(){};p.prototype.addTemplate=function(e,r){var u=document.createElement("div");u.innerHTML=e;for(var s,i,c,o=u.childNodes,d=0;d<o.length;)s=o[d],c=s.attributes,i=a(c),t=!1,i&&(n[i]={src:s.outerHTML,schema:new f(s.attributes,s),nut:i}),d++;r(null)},p.prototype.getTemplate=function(e){return n[e]};var m,v=function(e,n){for(var t=0,r=e.length,u=document.createDocumentFragment();r>t;)u.appendChild(e[t].render(n)),t++;return u},k=function(e,n){var t=e.pipe,r=e.scope,u=e.model,s=e.nuSakes,a=e.children,i=e.namesakes,c=e.nuAtts,o=e.nuClass,d=e.checked,l=e.each;return function(e){var h,f,p,m,k=[],b={};if(""===t)for(f in e)b[f]=e[f];if(t){k=t.split(" ");for(f in k)b[k[f]]=e[k[f]]}if(r&&(e=e[r]?e[r]:{}),t||""===t)for(f in b)e[f]=b[f];o&&n.classList.add(e[o]);for(f in i)n.setAttribute(f,s[f]||i[f]);for(f in c)n.setAttribute(f,e[c[f]]||"");if(""===d?e&&(n.checked=!0):d&&e[d]&&(n.checked=!0),l||""===l){if(""===l?m=e:e[l]&&(m=e[l]),m)for(f=0,h=m.length;h>f;)p=m[f],a&&n.appendChild(v(a,p).cloneNode(!0)),f++}else u&&e[u]?n.innerHTML=e[u]:""===u?n.innerHTML=e:a&&n.appendChild(v(a,e).cloneNode(!0));return n}},b=function(e){var n=document.createTextNode(e.data);return function(){return n}},y=function(e){var n=document.createComment(e.data);return function(){return n}},g=function(e){var n="<"+e.data+">";return function(){return n}},N=function(e){var t;e.as&&(t=e.as,delete e.as,e=s(e,n[t].schema));var r,u=document.createElement(e.name),a=e.attribs;for(r in a)u.setAttribute(r,a[r]);e["class"]&&u.classList.add(e["class"]);var i=e.children;for(r in i)i[r].render=m(i[r]);return k(e,u)};m=function(e){var n=e.schema;switch(n.type){case"tag":return N(n);case"text":return b(n);case"comment":return y(n);case"directive":return g(n)}},p.prototype.render=function(e,r){var u;if(r=r||{},!t){for(u in n)n[u].render=m(n[u]);t=!0}return n[e]?n[e].render(r):""};var w=new p;w.version="0.0.1","undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=w:e.nuts=w}(window);